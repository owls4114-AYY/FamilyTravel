<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¾æ¹–è¦ªå­éŠ V5.5 å®Œæ•´è¡Œç¨‹ç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0288d1; --secondary: #26c6da; --accent: #ffca28;
            --bg: #f0f4f8; --text: #37474f; --white: #ffffff;
            --danger: #ef5350; --success: #66bb6a; --shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text); padding-bottom: 100px; }
        
        header { background: linear-gradient(135deg, var(--primary), #01579b); color: white; padding: 20px 15px; border-radius: 0 0 25px 25px; box-shadow: var(--shadow); position: sticky; top: 0; z-index: 100; }
        .container { padding: 15px; max-width: 600px; margin: 0 auto; }
        .card { background: var(--white); border-radius: 16px; padding: 16px; margin-bottom: 16px; box-shadow: var(--shadow); }
        .card-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eceff1; padding-bottom: 10px; margin-bottom: 12px; }
        .card-header h3 { color: var(--primary); font-size: 1.1rem; display: flex; align-items: center; gap: 8px; margin: 0; }
        
        /* å¤©æ°£å„ªåŒ– */
        .weather-scroll { display: flex; overflow-x: auto; gap: 10px; padding-bottom: 5px; }
        .weather-day { min-width: 105px; text-align: center; background: #fdfdfd; border: 1px solid #eee; padding: 10px; border-radius: 12px; flex-shrink: 0; }
        .uv-tag { font-size: 0.65rem; padding: 1px 6px; border-radius: 4px; background: #fff3e0; color: #e65100; font-weight: bold; margin-top: 4px; display: inline-block; }

        /* èˆªç­æ¨£å¼ */
        .item-card { background: #f9fbfc; border: 1px solid #eceff1; border-radius: 12px; padding: 12px; margin-bottom: 12px; }
        .route-info { display: flex; align-items: center; gap: 10px; margin: 8px 0; font-weight: bold; color: var(--primary); }
        .status-tag { font-size: 0.7rem; padding: 2px 8px; border-radius: 10px; background: var(--success); color: white; font-weight: bold; }

        /* è¡Œç¨‹æ™‚é–“è»¸ (è©³ç´°ç‰ˆ) */
        .timeline { border-left: 2px solid var(--secondary); margin-left: 10px; padding-left: 20px; padding-bottom: 10px; }
        .timeline-day { font-weight: bold; color: var(--primary); font-size: 1.1rem; margin: 25px 0 15px -32px; display: flex; align-items: center; }
        .timeline-day i { background: var(--secondary); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-right: 10px; font-size: 0.9rem; }
        .timeline-item { position: relative; margin-bottom: 20px; }
        .timeline-item::before { content: ''; position: absolute; left: -26px; top: 6px; width: 10px; height: 10px; background: white; border: 2px solid var(--secondary); border-radius: 50%; }
        .time-tag { font-size: 0.85rem; font-weight: bold; color: #546e7a; margin-bottom: 2px; }
        .t-desc { font-size: 0.95rem; color: #333; }
        .t-note { font-size: 0.8rem; color: #888; margin-top: 2px; }

        /* è¡Œæ Tab */
        .tabs { display: flex; overflow-x: auto; gap: 8px; margin-bottom: 15px; padding-bottom: 5px; scrollbar-width: none; } 
        .tab-btn { white-space: nowrap; padding: 8px 16px; border-radius: 20px; background: #eee; color: #666; font-size: 0.9rem; border: none; }
        .tab-btn.active { background: var(--primary); color: white; }
        .checklist-item { display: flex; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .checklist-item input[type="checkbox"] { width: 20px; height: 20px; margin-right: 12px; }

        /* åº•éƒ¨å°è¦½ */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: var(--white); display: flex; justify-content: space-around; padding: 12px 0 25px 0; box-shadow: 0 -4px 20px rgba(0,0,0,0.05); border-top: 1px solid #eceff1; z-index: 99; }
        .nav-item { text-align: center; color: #b0bec5; flex: 1; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 1.3rem; display: block; margin-bottom: 4px; }
        .nav-item span { font-size: 0.7rem; }

        .page-section { display: none; animation: fadeIn 0.3s; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; display: none; justify-content: center; align-items: center; }
        .modal-overlay.active { display: flex; }
        .modal-content { background: white; padding: 25px; border-radius: 15px; width: 90%; max-width: 400px; max-height: 80vh; overflow-y: auto;}
        input { border: 1px solid #cfd8dc; border-radius: 6px; padding: 10px; width: 100%; margin-bottom: 10px; }
    </style>
</head>
<body>

    <header>
        <h1 style="font-size: 1.3rem;"><i class="fa-solid fa-plane-departure"></i> æ¾æ¹–è¦ªå­è‡ªç”±è¡Œ V5.5</h1>
        <p style="font-size: 0.8rem; opacity: 0.9; margin-top:5px;">å°å—å‡ºç™¼ â€¢ å‚‘æ–‡ä¸€å®¶äº”å£</p>
    </header>

    <div class="container">
        
        <div id="page-home" class="page-section active">
            <div class="card">
                <div class="card-header"><h3><i class="fa-solid fa-cloud-sun"></i> 5æ—¥å¤©æ°£ (é™é›¨/UV)</h3></div>
                <div id="weather-container" class="weather-scroll"></div>
            </div>

            <div class="card">
                <div class="card-header"><h3><i class="fa-solid fa-plane"></i> å°å— $\leftrightarrow$ æ¾æ¹–èˆªç­</h3><button onclick="openModal('flight')" style="background:none; color:var(--primary); border:none;">è¨­å®š</button></div>
                <div id="flight-display"></div>
            </div>

            <div class="card">
                <div class="card-header"><h3><i class="fa-solid fa-hotel"></i> ä½å®¿èˆ‡å°èˆª</h3><button onclick="openModal('hotel')" style="background:none; color:var(--primary); border:none;">æ–°å¢</button></div>
                <div id="hotel-list"></div>
            </div>

            <div class="card">
                <div class="card-header"><h3><i class="fa-solid fa-car"></i> ç§Ÿè»Šè³‡è¨Š</h3><button onclick="openModal('car')" style="background:none; color:var(--primary); border:none;">ç·¨è¼¯</button></div>
                <div id="car-display"></div>
            </div>
        </div>

        <div id="page-schedule" class="page-section">
            <div class="card">
                <div class="card-header"><h3><i class="fa-solid fa-map-location-dot"></i> è©³ç´°è¡Œç¨‹è¦åŠƒ</h3></div>
                
                <div class="timeline">
                    <div class="timeline-day"><i class="fa-solid fa-1"></i> Day 1 æŠµé”èˆ‡å—ç’°</div>
                    <div class="timeline-item">
                        <div class="time-tag">10:30</div>
                        <div class="t-desc">å°å—æ©Ÿå ´èµ·é£›</div>
                        <div class="t-note">æª¢æŸ¥è­‰ä»¶ã€å®¥ç¨‹/é‡‡å¦¤å®‰æ’«</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">11:30</div>
                        <div class="t-desc">æŠµé”é¦¬å…¬ & å–è»Š</div>
                        <div class="t-note">æª¢æŸ¥æ±½åº§æ˜¯å¦å®‰è£å¦¥ç•¶</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">12:30</div>
                        <div class="t-desc">å¸‚å€åˆé¤ (æ–‡åº·è¡—/å°å·ç±³ç²‰)</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">15:00</div>
                        <div class="t-desc">å±±æ°´æ²™ç˜ç©æ²™ ğŸ–ï¸</div>
                        <div class="t-note">è¨˜å¾—å¸¶å¿ƒèªçš„ç©æ²™çµ„ã€æ²–æ´—è¡£ç‰©</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">17:00</div>
                        <div class="t-desc">é¢¨æ«ƒè½æ¿¤</div>
                        <div class="t-note">çœ‹å¹½æµ®æ¶¼äº­ã€åƒè—¥è†³è›‹</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">18:30</div>
                        <div class="t-desc">å¸‚å€æ™šé¤ (ç‡’è‚‰æˆ–æµ·é®®)</div>
                    </div>

                    <div class="timeline-day"><i class="fa-solid fa-2"></i> Day 2 åŒ—ç’°æ¢éšª</div>
                    <div class="timeline-item">
                        <div class="time-tag">09:30</div>
                        <div class="t-desc">æ¾æ¹–æ°´æ—é¤¨ ğŸ </div>
                        <div class="t-note">å®¤å…§å†·æ°£è¡Œç¨‹ï¼Œé©åˆå°å­©çœ‹é¤µé£Ÿç§€</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">12:00</div>
                        <div class="t-desc">é€šæ¨‘å¤æ¦• & è·¨æµ·å¤§æ©‹</div>
                        <div class="t-note">åƒä»™äººæŒå†°ã€æ‹å…¨å®¶ç¦</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">13:30</div>
                        <div class="t-desc">äºŒå´å¤åèšè½</div>
                        <div class="t-note">å–æä»èŒ¶ã€çœ‹å¤è¹Ÿ</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">16:00</div>
                        <div class="t-desc">æ¼ç¿å³¶ç‡ˆå¡” (è¥¿å¶¼ç‡ˆå¡”)</div>
                        <div class="t-note">å°ç£æœ€å¤è€ç‡ˆå¡”ï¼Œçœ‹å¤•é™½çµ•ç¾</div>
                    </div>

                    <div class="timeline-day"><i class="fa-solid fa-3"></i> Day 3 æ¡è²·èˆ‡è¿”å®¶</div>
                    <div class="timeline-item">
                        <div class="time-tag">09:30</div>
                        <div class="t-desc">ä¸­å¤®è€è¡—å·¡ç¦®</div>
                        <div class="t-note">å¤©åå®®ç¥ˆç¦ã€å››çœ¼äº•</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">11:00</div>
                        <div class="t-desc">åç”¢æ¡è³¼æˆ° ğŸ</div>
                        <div class="t-note">é»‘ç³–ç³•ã€å¹²è²é†¬ã€é¹¹é¤…</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">13:30</div>
                        <div class="t-desc">æ•´ç†è¡Œæ & é‚„è»Š</div>
                    </div>
                    <div class="timeline-item">
                        <div class="time-tag">15:00</div>
                        <div class="t-desc">å‰å¾€æ©Ÿå ´ (æ¾æ¹– $\to$ å°å—)</div>
                        <div class="t-note">å¿«æ¨‚è³¦æ­¸</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-list" class="page-section">
            <div class="card">
                <div class="card-header"><h3><i class="fa-solid fa-suitcase"></i> äº”äººè¡Œææº–å‚™</h3></div>
                <div class="tabs" id="pack-tabs"></div>
                <div id="pack-content"></div>
            </div>
        </div>

        <div id="page-shop" class="page-section">
            <div class="card">
                <div class="card-header"><h3><i class="fa-solid fa-wallet"></i> è³¼ç‰©ç´€éŒ„</h3></div>
                <div id="shop-list"></div>
                <div style="margin-top:15px;">
                    <input type="text" id="shop-name" placeholder="é …ç›®">
                    <input type="number" id="shop-price" placeholder="é‡‘é¡">
                    <button onclick="addShopItem()" style="width:100%; background:var(--secondary); color:white; padding:10px; border-radius:8px; border:none;">æ–°å¢é–‹éŠ·</button>
                </div>
                <div style="background:var(--accent); padding:12px; border-radius:10px; margin-top:15px; text-align:right; font-weight:bold;">
                    ç¸½èŠ±è²»ï¼š$ <span id="shop-total">0</span>
                </div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home', this)"><i class="fa-solid fa-house"></i><span>é¦–é </span></div>
        <div class="nav-item" onclick="switchTab('schedule', this)"><i class="fa-solid fa-calendar"></i><span>è¡Œç¨‹</span></div>
        <div class="nav-item" onclick="switchTab('list', this)"><i class="fa-solid fa-list-check"></i><span>è¡Œæ</span></div>
        <div class="nav-item" onclick="switchTab('shop', this)"><i class="fa-solid fa-cart-shopping"></i><span>è³¼ç‰©</span></div>
    </nav>

    <div id="modal-flight" class="modal-overlay"><div class="modal-content">
        <h3>è¨­å®šèˆªç­ (å°å— $\leftrightarrow$ æ¾æ¹–)</h3>
        <p style="font-size:0.7rem; color:var(--primary);">å»ç¨‹ (å°å—å‡ºç™¼)</p>
        <input type="text" id="f-out-no" placeholder="å»ç¨‹ç­æ¬¡ (å¦‚ B7-8675)">
        <input type="time" id="f-out-time">
        <p style="font-size:0.7rem; color:var(--primary);">å›ç¨‹ (æ¾æ¹–å‡ºç™¼)</p>
        <input type="text" id="f-in-no" placeholder="å›ç¨‹ç­æ¬¡">
        <input type="time" id="f-in-time">
        <button onclick="saveFlight()" style="width:100%; padding:12px; background:var(--primary); color:white; border-radius:8px; border:none;">å„²å­˜èˆªç­è³‡è¨Š</button>
        <button onclick="closeModal()" style="width:100%; margin-top:10px; background:#eee; border:none; padding:8px; border-radius:8px;">é—œé–‰</button>
    </div></div>
    
    <div id="modal-hotel" class="modal-overlay"><div class="modal-content">
        <h3>æ–°å¢ä½å®¿</h3>
        <input type="text" id="h-name" placeholder="é£¯åº—åç¨± (å¦‚: ç¦æœ‹)">
        <button onclick="autoFill('hotel')" style="background:#e8f5e9; color:#2e7d32; font-size:0.8rem; padding:6px; margin-bottom:12px; width:100%; border:none;">âœ¨ è‡ªå‹•æœå°‹åœ°å€</button>
        <input type="text" id="h-addr" placeholder="åœ°å€">
        <button onclick="addHotel()" style="width:100%; padding:12px; background:var(--primary); color:white; border-radius:8px; border:none;">æ–°å¢</button>
        <button onclick="closeModal()" style="width:100%; margin-top:10px; background:#eee; border:none; padding:8px; border-radius:8px;">é—œé–‰</button>
    </div></div>

    <div id="modal-car" class="modal-overlay"><div class="modal-content">
        <h3>ç§Ÿè»Šè¨­å®š</h3>
        <input type="text" id="c-name" placeholder="ç§Ÿè»Šå…¬å¸">
        <button onclick="autoFill('car')" style="background:#e8f5e9; color:#2e7d32; font-size:0.8rem; padding:6px; margin-bottom:12px; width:100%; border:none;">âœ¨ è‡ªå‹•æœå°‹è³‡è¨Š</button>
        <input type="text" id="c-addr" placeholder="å–è»Šåœ°å€">
        <button onclick="saveCar()" style="width:100%; padding:12px; background:var(--primary); color:white; border-radius:8px; border:none;">å„²å­˜</button>
        <button onclick="closeModal()" style="width:100%; margin-top:10px; background:#eee; border:none; padding:8px; border-radius:8px;">é—œé–‰</button>
    </div></div>

    <script>
        // --- è¡Œæè³‡æ–™åº« ---
        const DEFAULT_PACKING = {
            "å‚‘ (çˆ¸)": ["èº«åˆ†è­‰/é§•ç…§", "ç¾é‡‘/æ‰‹æ©Ÿ", "æ³³è¤²", "æ›´æ›è¡£ç‰©"],
            "æ–‡ (åª½)": ["èº«åˆ†è­‰/å¥ä¿å¡", "åŒ–å¦å“", "é®é™½å¸½", "æšˆèˆ¹è—¥"],
            "å¿ƒèª (8)": ["å¥ä¿å¡", "å°èƒŒåŒ…", "æ³³è£", "è–„å¤–å¥—"],
            "å®¥ç¨‹ (5)": ["å¥ä¿å¡", "æ™šå®‰å°¿å¸ƒ", "æŒ–æ²™å·¥å…·", "é˜²æ›¬ä¹³"],
            "é‡‡å¦¤ (1)": ["å¥ä¿å¡/æ‰‹å†Š", "å¥¶ç²‰å¥¶ç“¶", "å°¿å¸ƒ", "æ¨è»Š/èƒŒå·¾", "å‰¯é£Ÿå“"]
        };
        let packingData = JSON.parse(localStorage.getItem('trip_v55_pack')) || {};
        if(Object.keys(packingData).length === 0) {
            for(let p in DEFAULT_PACKING) { packingData[p] = DEFAULT_PACKING[p].map(t => ({ t: t, c: false })); }
        }
        let currentTab = "å‚‘ (çˆ¸)";

        function switchTab(page, el) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + page).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }
        function openModal(id) { document.getElementById('modal-'+id).classList.add('active'); }
        function closeModal() { document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active')); }

        // --- å¤©æ°£ API (å«é™é›¨èˆ‡UV) ---
        async function loadWeather() {
            try {
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=23.56&longitude=119.57&daily=weathercode,temperature_2m_max,temperature_2m_min,uv_index_max,precipitation_probability_max&timezone=auto`);
                const data = await res.json();
                const WEEK = ["é€±æ—¥", "é€±ä¸€", "é€±äºŒ", "é€±ä¸‰", "é€±å››", "é€±äº”", "é€±å…­"];
                const container = document.getElementById('weather-container');
                container.innerHTML = '';
                for(let i=0; i<5; i++) {
                    const date = new Date(data.daily.time[i]);
                    const uv = data.daily.uv_index_max[i];
                    let uvClass = uv > 7 ? '#d32f2f' : (uv > 5 ? '#f57c00' : '#388e3c');
                    
                    container.innerHTML += `
                        <div class="weather-day">
                            <div style="font-weight:bold; font-size:0.8rem;">${date.getMonth()+1}/${date.getDate()} (${WEEK[date.getDay()]})</div>
                            <div style="font-size:1.3rem; color:var(--primary); margin:5px 0;"><i class="fa-solid fa-cloud-sun"></i></div>
                            <div style="font-size:0.85rem; font-weight:bold;">${Math.round(data.daily.temperature_2m_max[i])}Â°C</div>
                            <div style="font-size:0.7rem; color:#0277bd;"><i class="fa-solid fa-umbrella"></i> ${data.daily.precipitation_probability_max[i]}%</div>
                            <div class="uv-tag" style="color:${uvClass}; background:#fff;">UV: ${uv}</div>
                        </div>`;
                }
            } catch(e) { }
        }

        // --- æ¨¡æ“¬è‡ªå‹•åŒ¯å…¥ ---
        const DB = {
            hotel: { "ç¦æœ‹": {n:"æ¾æ¹–ç¦æœ‹å–œä¾†ç™»", a:"é¦¬å…¬å¸‚æ–°åº—è·¯197è™Ÿ"}, "å–œä¾†ç™»": {n:"æ¾æ¹–ç¦æœ‹å–œä¾†ç™»", a:"é¦¬å…¬å¸‚æ–°åº—è·¯197è™Ÿ"} },
            car: { "å¿«æ¨‚": {n:"å¿«æ¨‚ç§Ÿè»Š", a:"é¦¬å…¬å¸‚ä¸­èˆˆè·¯62è™Ÿ"} }
        };
        function autoFill(type) {
            const val = document.getElementById(type==='hotel'?'h-name':'c-name').value;
            for(let k in DB[type]) {
                if(val.includes(k)) {
                    if(type==='hotel') { document.getElementById('h-name').value=DB[type][k].n; document.getElementById('h-addr').value=DB[type][k].a; }
                    else { document.getElementById('c-name').value=DB[type][k].n; document.getElementById('c-addr').value=DB[type][k].a; }
                    return;
                }
            }
        }

        // --- èˆªç­é‚è¼¯ (å°å—-æ¾æ¹–) ---
        function saveFlight() {
            const f = { out: document.getElementById('f-out-no').value, outT: document.getElementById('f-out-time').value, in: document.getElementById('f-in-no').value, inT: document.getElementById('f-in-time').value };
            localStorage.setItem('trip_v55_f', JSON.stringify(f)); renderF(); closeModal();
        }
        function renderF() {
            const f = JSON.parse(localStorage.getItem('trip_v55_f')) || { out: "ç«‹æ¦® B7-8675", outT: "10:30", in: "ç«‹æ¦® B7-8676", inT: "16:20" };
            document.getElementById('flight-display').innerHTML = `
                <div class="item-card">
                    <div style="display:flex; justify-content:space-between;"><b>å»ç¨‹ ${f.out}</b> <span class="status-tag">æº–é»</span></div>
                    <div class="route-info">å°å— <i class="fa-solid fa-arrow-right"></i> æ¾æ¹–</div>
                    <div style="font-size:0.85rem; color:#666;">é è¨ˆå‡ºç™¼ï¼š${f.outT}</div>
                </div>
                <div class="item-card">
                    <div style="display:flex; justify-content:space-between;"><b>å›ç¨‹ ${f.in}</b> <span class="status-tag">æº–é»</span></div>
                    <div class="route-info">æ¾æ¹– <i class="fa-solid fa-arrow-right"></i> å°å—</div>
                    <div style="font-size:0.85rem; color:#666;">é è¨ˆå‡ºç™¼ï¼š${f.inT}</div>
                </div>`;
        }

        // --- ä½å®¿èˆ‡ç§Ÿè»Š ---
        function addHotel() {
            const list = JSON.parse(localStorage.getItem('trip_v55_h')) || [];
            list.push({ n: document.getElementById('h-name').value, a: document.getElementById('h-addr').value });
            localStorage.setItem('trip_v55_h', JSON.stringify(list)); renderH(); closeModal();
        }
        function renderH() {
            const list = JSON.parse(localStorage.getItem('trip_v55_h')) || [];
            document.getElementById('hotel-list').innerHTML = list.map(i => `
                <div class="item-card"><b>${i.n}</b><br><a href="https://www.google.com/maps/search/${encodeURIComponent(i.a)}" target="_blank" class="nav-link"><i class="fa-solid fa-location-dot"></i> å°èˆª</a></div>
            `).join('');
        }
        function saveCar() {
            const c = { n: document.getElementById('c-name').value, a: document.getElementById('c-addr').value };
            localStorage.setItem('trip_v55_c', JSON.stringify(c)); renderC(); closeModal();
        }
        function renderC() {
            const c = JSON.parse(localStorage.getItem('trip_v55_c'));
            if(c) document.getElementById('car-display').innerHTML = `<div class="item-card"><b>${c.n}</b><br><a href="https://www.google.com/maps/search/${encodeURIComponent(c.a)}" target="_blank" class="nav-link"><i class="fa-solid fa-car"></i> å–è»Šå°èˆª</a></div>`;
        }

        // --- è¡Œææ¸…å–® ---
        function renderPack() {
            const tabsDiv = document.getElementById('pack-tabs');
            const contentDiv = document.getElementById('pack-content');
            tabsDiv.innerHTML = ''; contentDiv.innerHTML = '';
            for(let p in packingData) {
                const btn = document.createElement('button');
                btn.className = `tab-btn ${p===currentTab?'active':''}`;
                btn.innerText = p;
                btn.onclick = () => { currentTab = p; renderPack(); };
                tabsDiv.appendChild(btn);
            }
            packingData[currentTab].forEach((item, idx) => {
                contentDiv.innerHTML += `
                    <div class="checklist-item ${item.c?'checked':''}">
                        <input type="checkbox" onchange="toggleP(${idx})" ${item.c?'checked':''}>
                        <span style="${item.c?'text-decoration:line-through;color:#ccc':''}">${item.t}</span>
                    </div>`;
            });
            localStorage.setItem('trip_v55_pack', JSON.stringify(packingData));
        }
        function toggleP(idx) { packingData[currentTab][idx].c = !packingData[currentTab][idx].c; renderPack(); }

        // --- è³¼ç‰© ---
        function addShopItem() {
            const n = document.getElementById('shop-name').value, p = document.getElementById('shop-price').value;
            const list = JSON.parse(localStorage.getItem('trip_v55_s')) || [];
            if(n && p) { list.push({ n, p: parseInt(p) }); localStorage.setItem('trip_v55_s', JSON.stringify(list)); }
            document.getElementById('shop-name').value = ''; document.getElementById('shop-price').value = ''; renderS();
        }
        function renderS() {
            const list = JSON.parse(localStorage.getItem('trip_v55_s')) || [];
            let total = 0;
            document.getElementById('shop-list').innerHTML = list.map(i => { total+=i.p; return `<div class="shop-item" style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #eee;"><span>${i.n}</span><b>$${i.p}</b></div>`; }).join('');
            document.getElementById('shop-total').innerText = total;
        }

        loadWeather(); renderF(); renderH(); renderC(); renderPack(); renderS();
    </script>
</body>
</html>