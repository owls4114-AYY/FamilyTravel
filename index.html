<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¾æ¹–è¦ªå­éŠ V4.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0088cc;
            --secondary: #4db6ac;
            --accent: #ff9800;
            --bg: #f4f7f6;
            --text: #333;
            --white: #ffffff;
            --danger: #ff5252;
            --success: #28a745; /* æº–é»ç¶ è‰² */
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text); padding-bottom: 90px; }
        button { cursor: pointer; border: none; outline: none; transition: 0.2s; }
        input { border: 1px solid #ddd; border-radius: 4px; padding: 8px; font-size: 16px; }

        /* --- Header --- */
        header {
            background: linear-gradient(135deg, var(--primary), #005f8f); color: white; padding: 20px 15px;
            border-radius: 0 0 20px 20px; box-shadow: var(--shadow);
            position: sticky; top: 0; z-index: 100;
        }
        
        /* --- Container & Cards --- */
        .container { padding: 15px; max-width: 600px; margin: 0 auto; }
        .card { background: var(--white); border-radius: 15px; padding: 15px; margin-bottom: 15px; box-shadow: var(--shadow); position: relative; }
        
        /* å¡ç‰‡æ¨™é¡Œå€ (å«æŒ‰éˆ•) */
        .card-header {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--bg); padding-bottom: 10px; margin-bottom: 10px;
        }
        .card-header h3 { color: var(--primary); font-size: 1.1rem; display: flex; align-items: center; gap: 8px; margin: 0; }
        .btn-sm { background: #f0f0f0; color: #555; padding: 5px 12px; border-radius: 15px; font-size: 0.8rem; }
        .btn-sm:hover { background: #e0e0e0; color: var(--primary); }

        /* --- Weather --- */
        .weather-scroll { display: flex; overflow-x: auto; gap: 10px; padding-bottom: 5px; scrollbar-width: none; }
        .weather-scroll::-webkit-scrollbar { display: none; }
        .weather-day { 
            min-width: 85px; text-align: center; background: #e3f2fd; 
            padding: 10px; border-radius: 12px; flex-shrink: 0;
        }
        .weather-icon { font-size: 1.8rem; color: var(--primary); margin: 8px 0; }
        
        /* --- Flights (Updated) --- */
        .flight-card { 
            border: 1px solid #eee; border-radius: 10px; padding: 12px; margin-bottom: 10px; 
            background: #fafafa; position: relative;
        }
        .flight-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .flight-label { font-size: 0.75rem; color: var(--primary); font-weight: bold; background: #e1f5fe; padding: 2px 6px; border-radius: 4px; }
        .status-badge { font-size: 0.75rem; color: white; background: var(--success); padding: 2px 8px; border-radius: 10px; font-weight: bold; }
        
        .flight-route { font-size: 1.2rem; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        .flight-detail { display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.9rem; color: #555; }

        /* --- Info Cards (Hotel/Car) --- */
        .info-row { margin-bottom: 8px; font-size: 0.95rem; display: flex; gap: 10px; }
        .info-icon { color: var(--primary); width: 20px; text-align: center; }
        .info-note { background: #fff3e0; color: #e65100; padding: 8px; border-radius: 8px; font-size: 0.85rem; margin-top: 10px; display: flex; gap: 8px; align-items: flex-start;}

        /* --- Itinerary & List Styles (Inherited from V3) --- */
        .day-group { margin-bottom: 15px; border: 1px solid #eee; border-radius: 10px; overflow: hidden; }
        .day-header { background: #fff; padding: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: bold; }
        .day-content { display: none; background: #fafafa; padding: 15px; border-top: 1px solid #eee; }
        .timeline-item { padding-left: 15px; border-left: 2px solid #ddd; margin-bottom: 15px; position: relative; }
        .timeline-item::before { content:''; position: absolute; left: -6px; top: 0; width: 10px; height: 10px; background: var(--secondary); border-radius: 50%; }
        .btn-map { background: #fff; border: 1px solid #ddd; color: var(--primary); padding: 4px 10px; border-radius: 15px; font-size: 0.8rem; text-decoration: none;}

        .checklist-item { display: flex; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .checklist-item input[type="checkbox"] { width: 20px; height: 20px; margin-right: 12px; accent-color: var(--secondary); }
        .checklist-item.checked span { text-decoration: line-through; color: #bbb; }
        .btn-del { color: #ccc; background: none; padding: 5px; }

        /* --- Modal --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 1000;
            display: none; justify-content: center; align-items: center;
        }
        .modal-overlay.active { display: flex; }
        .modal-content { background: white; padding: 25px; border-radius: 15px; width: 90%; max-width: 400px; animation: popIn 0.3s; }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* --- Bottom Nav --- */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; background: var(--white);
            display: flex; justify-content: space-around; padding: 10px 0 20px 0;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05); border-top: 1px solid #eee; z-index: 99;
        }
        .nav-item { text-align: center; color: #aaa; cursor: pointer; flex: 1; transition: 0.2s; }
        .nav-item.active { color: var(--primary); transform: translateY(-2px); }
        .nav-item i { font-size: 1.4rem; display: block; margin-bottom: 4px; }
        .nav-item span { font-size: 0.7rem; }
        
        .page-section { display: none; animation: fadeIn 0.3s; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Helpers */
        .add-box { display: flex; margin-top: 15px; gap: 8px; }
        .add-box input { flex: 1; }
        .btn-add { background: var(--secondary); color: white; width: 40px; border-radius: 4px; font-size: 1.2rem; }

    </style>
</head>
<body>

    <header>
        <h1 style="font-size: 1.3rem;">æ¾æ¹–è¦ªå­éŠ</h1>
        <p id="header-date" style="font-size: 0.8rem; opacity: 0.9;">è¼‰å…¥ä¸­...</p>
    </header>

    <div class="container">
        
        <div id="page-home" class="page-section active">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-cloud-sun-rain"></i> å¤©æ°£é å ±</h3>
                </div>
                <div id="weather-container" class="weather-scroll">
                    <div style="padding:10px; color:#666;">æ­£åœ¨é€£ç·šæ°£è±¡å±€...</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-plane-departure"></i> èˆªç­è³‡è¨Š</h3>
                    <button class="btn-sm" onclick="openFlightModal()">
                        <i class="fa-solid fa-pen"></i> ä¿®æ”¹è¨­å®š
                    </button>
                </div>
                
                <div class="flight-card">
                    <div class="flight-top">
                        <span class="flight-label">å»ç¨‹</span>
                        <span class="status-badge"><i class="fa-solid fa-check"></i> æº–é» ON TIME</span>
                    </div>
                    <div class="flight-route">
                        <span id="out-from">å°å—</span> <i class="fa-solid fa-arrow-right" style="font-size:0.9rem; color:#ccc;"></i> <span id="out-to">æ¾æ¹–</span>
                    </div>
                    <div class="flight-detail">
                        <span><i class="fa-regular fa-clock"></i> <span id="out-time">--:--</span></span>
                        <span><i class="fa-solid fa-ticket"></i> <span id="out-code">--</span></span>
                        <span id="out-date">--/--</span>
                    </div>
                </div>

                <div class="flight-card">
                    <div class="flight-top">
                        <span class="flight-label">å›ç¨‹</span>
                        <span class="status-badge"><i class="fa-solid fa-check"></i> æº–é» ON TIME</span>
                    </div>
                    <div class="flight-route">
                        <span id="in-from">æ¾æ¹–</span> <i class="fa-solid fa-arrow-right" style="font-size:0.9rem; color:#ccc;"></i> <span id="in-to">å°å—</span>
                    </div>
                    <div class="flight-detail">
                        <span><i class="fa-regular fa-clock"></i> <span id="in-time">--:--</span></span>
                        <span><i class="fa-solid fa-ticket"></i> <span id="in-code">--</span></span>
                        <span id="in-date">--/--</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-hotel"></i> ä½å®¿è³‡è¨Š</h3>
                </div>
                <div style="padding: 0 5px;">
                    <h4 style="margin-bottom: 8px; font-size: 1.1rem;">æ¾æ¹–ç¦æœ‹å–œä¾†ç™»é…’åº—</h4>
                    <div class="info-row">
                        <div class="info-icon"><i class="fa-solid fa-location-dot"></i></div>
                        <div>é¦¬å…¬å¸‚æ–°åº—è·¯197è™Ÿ</div>
                    </div>
                    <div class="info-row">
                        <div class="info-icon"><i class="fa-solid fa-phone"></i></div>
                        <div>06-926-6288</div>
                    </div>
                    <div class="info-note">
                        <i class="fa-solid fa-circle-exclamation"></i>
                        <span>å·²å‚™è¨»ï¼šéœ€è¦å¬°å…’åºŠã€æ¶ˆæ¯’é‹ã€åºŠåœ</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-car"></i> ç§Ÿè»Šè³‡è¨Š</h3>
                </div>
                <div style="padding: 0 5px;">
                    <h4 style="margin-bottom: 8px; font-size: 1.1rem;">å¿«æ¨‚ç§Ÿè»Š (Toyota Wish)</h4>
                    <div class="info-row">
                        <div class="info-icon"><i class="fa-solid fa-map-pin"></i></div>
                        <div>é¦¬å…¬æ©Ÿå ´ 1 è™Ÿå‡ºå£æ¥æ©Ÿ</div>
                    </div>
                    <div class="info-note">
                        <i class="fa-solid fa-baby"></i>
                        <span>è«‹ç¢ºèªï¼š2å¼µå®‰å…¨åº§æ¤… + 1å€‹å¢é«˜å¢Š</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-schedule" class="page-section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-map-location-dot"></i> è¡Œç¨‹è¦åŠƒ</h3>
                </div>
                <div class="day-group">
                    <div class="day-header" onclick="toggleDay(this)">
                        <span>Day 1 æŠµé”èˆ‡æ¼«éŠ</span> <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="day-content">
                        <div class="timeline-item">
                            <div style="font-size:0.85rem; color:#666; font-weight:bold;">14:00</div>
                            <div style="font-size:1rem; margin:2px 0;">é¦¬å…¬æ©Ÿå ´å–è»Š</div>
                        </div>
                        <div class="timeline-item">
                            <div style="font-size:0.85rem; color:#666; font-weight:bold;">15:30</div>
                            <div style="font-size:1rem; margin:2px 0;">ç¯¤è¡Œåæ‘</div>
                            <a href="https://goo.gl/maps/placeholder" target="_blank" class="btn-map"><i class="fa-solid fa-location-arrow"></i> å°èˆª</a>
                        </div>
                    </div>
                </div>
                <div class="day-group">
                    <div class="day-header" onclick="toggleDay(this)">
                        <span>Day 2 åŒ—ç’°å³¶ä¹‹æ—…</span> <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="day-content">
                        <div class="timeline-item">
                            <div style="font-size:0.85rem; color:#666; font-weight:bold;">10:00</div>
                            <div style="font-size:1rem; margin:2px 0;">æ¾æ¹–æ°´æ—é¤¨ (å†·æ°£)</div>
                            <a href="https://goo.gl/maps/placeholder" target="_blank" class="btn-map"><i class="fa-solid fa-location-arrow"></i> å°èˆª</a>
                        </div>
                        <div class="timeline-item">
                            <div style="font-size:0.85rem; color:#666; font-weight:bold;">16:00</div>
                            <div style="font-size:1rem; margin:2px 0;">éš˜é–€æ²™ç˜ (ç©æ²™)</div>
                        </div>
                    </div>
                </div>
                <div class="day-group">
                    <div class="day-header" onclick="toggleDay(this)">
                        <span>Day 3 æµ·æ´‹ç‰§å ´</span> <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="day-content">
                        <div class="timeline-item">
                            <div style="font-size:0.85rem; color:#666; font-weight:bold;">13:30</div>
                            <div style="font-size:1rem; margin:2px 0;">æµ·æ´‹ç‰§å ´ (çƒ¤ç‰¡è £)</div>
                            <a href="https://goo.gl/maps/placeholder" target="_blank" class="btn-map"><i class="fa-solid fa-ship"></i> å°èˆªè‡³ç¢¼é ­</a>
                        </div>
                    </div>
                </div>
                <div class="day-group">
                    <div class="day-header" onclick="toggleDay(this)">
                        <span>Day 4 æ¡è²·è¿”å®¶</span> <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="day-content">
                        <div class="timeline-item">
                            <div style="font-size:0.85rem; color:#666; font-weight:bold;">10:00</div>
                            <div style="font-size:1rem; margin:2px 0;">ä¸­å¤®è€è¡—æ¡è²·</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-list" class="page-section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-suitcase-rolling"></i> è¡Œææº–å‚™</h3>
                </div>
                
                <h4 style="margin:15px 0 10px; color:var(--secondary);">ğŸ‘¶ 1æ­²å¯¶å¯¶å°ˆå€</h4>
                <div id="list-baby"></div>
                <div class="add-box">
                    <input type="text" id="input-baby" placeholder="æ–°å¢...">
                    <button class="btn-add" onclick="addItem('baby')">+</button>
                </div>

                <h4 style="margin:20px 0 10px; color:var(--primary);">ğŸ‘¦ å¤§ç«¥èˆ‡å…¶ä»–</h4>
                <div id="list-kids"></div>
                <div class="add-box">
                    <input type="text" id="input-kids" placeholder="æ–°å¢...">
                    <button class="btn-add" onclick="addItem('kids')">+</button>
                </div>
            </div>
        </div>

        <div id="page-shop" class="page-section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fa-solid fa-cart-shopping"></i> è³¼ç‰©è¨˜å¸³</h3>
                </div>
                <div id="list-shop"></div>
                <div class="add-box" style="margin-top:20px; border-top:1px solid #eee; padding-top:10px;">
                    <input type="text" id="input-shop-name" placeholder="å“é …" style="flex:2;">
                    <input type="number" id="input-shop-price" placeholder="$" style="flex:1;">
                    <button class="btn-add" onclick="addShopItem()">+</button>
                </div>
                <div style="background:var(--accent); color:white; padding:10px; border-radius:8px; margin-top:10px; text-align:right; font-weight:bold;">
                    ç¸½é‡‘é¡ï¼š<span id="shop-total">0</span> å…ƒ
                </div>
            </div>
        </div>

    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home', this)">
            <i class="fa-solid fa-house"></i><span>é¦–é </span>
        </div>
        <div class="nav-item" onclick="switchTab('schedule', this)">
            <i class="fa-solid fa-calendar-days"></i><span>è¡Œç¨‹</span>
        </div>
        <div class="nav-item" onclick="switchTab('list', this)">
            <i class="fa-solid fa-list-check"></i><span>è¡Œæ</span>
        </div>
        <div class="nav-item" onclick="switchTab('shop', this)">
            <i class="fa-solid fa-wallet"></i><span>è³¼ç‰©</span>
        </div>
    </nav>

    <div id="flight-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 style="color:var(--text); margin-bottom:15px;">è¨­å®šèˆªç­è³‡è¨Š</h3>
            
            <p style="font-weight:bold; color:var(--primary); margin-top:10px;">å»ç¨‹ (å°å— â†’ æ¾æ¹–)</p>
            <input type="date" id="e-out-date" style="width:100%; margin-bottom:5px;">
            <div style="display:flex; gap:5px;">
                <input type="time" id="e-out-time" style="flex:1;">
                <input type="text" id="e-out-code" placeholder="ç­è™Ÿ (å¦‚ B7-8675)" style="flex:1;">
            </div>

            <p style="font-weight:bold; color:var(--primary); margin-top:15px;">å›ç¨‹ (æ¾æ¹– â†’ å°å—)</p>
            <input type="date" id="e-in-date" style="width:100%; margin-bottom:5px;">
            <div style="display:flex; gap:5px;">
                <input type="time" id="e-in-time" style="flex:1;">
                <input type="text" id="e-in-code" placeholder="ç­è™Ÿ" style="flex:1;">
            </div>

            <div style="margin-top:20px; text-align:right;">
                <button onclick="document.getElementById('flight-modal').classList.remove('active')" style="padding:8px 15px; background:#ddd; border-radius:5px; margin-right:5px;">å–æ¶ˆ</button>
                <button onclick="saveFlight()" style="padding:8px 15px; background:var(--primary); color:white; border-radius:5px;">å„²å­˜æ›´æ–°</button>
            </div>
        </div>
    </div>

    <script>
        // --- 1. åŸºæœ¬è¨­å®š ---
        const today = new Date();
        document.getElementById('header-date').innerText = today.toLocaleDateString();
        function switchTab(page, el) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + page).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }
        function toggleDay(header) {
            const content = header.nextElementSibling;
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
        }

        // --- 2. å¤©æ°£ (Open-Meteo) ---
        async function loadWeather() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=23.56&longitude=119.57&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=auto');
                const data = await res.json();
                const container = document.getElementById('weather-container');
                container.innerHTML = '';
                data.daily.time.forEach((t, i) => {
                    if(i > 4) return;
                    const d = new Date(t);
                    const code = data.daily.weathercode[i];
                    let icon = 'fa-sun';
                    if(code > 2) icon = 'fa-cloud-sun';
                    if(code > 50) icon = 'fa-cloud-showers-heavy';
                    container.innerHTML += `
                        <div class="weather-day">
                            <div style="font-size:0.8rem; color:#666;">${d.getMonth()+1}/${d.getDate()}</div>
                            <div class="weather-icon"><i class="fa-solid ${icon}"></i></div>
                            <div style="font-weight:bold;">${Math.round(data.daily.temperature_2m_min[i])}Â°-${Math.round(data.daily.temperature_2m_max[i])}Â°</div>
                        </div>
                    `;
                });
            } catch(e) { document.getElementById('weather-container').innerText = 'å¤©æ°£è¼‰å…¥å¤±æ•—'; }
        }
        loadWeather();

        // --- 3. èˆªç­é‚è¼¯ (å«ä¿®æ”¹) ---
        let flight = JSON.parse(localStorage.getItem('trip_flight_v4')) || {
            out: {d:'', t:'', c:''}, in: {d:'', t:'', c:''}
        };
        function renderFlight() {
            document.getElementById('out-date').innerText = flight.out.d || '--/--';
            document.getElementById('out-time').innerText = flight.out.t || '--:--';
            document.getElementById('out-code').innerText = flight.out.c || '--';
            document.getElementById('in-date').innerText = flight.in.d || '--/--';
            document.getElementById('in-time').innerText = flight.in.t || '--:--';
            document.getElementById('in-code').innerText = flight.in.c || '--';
        }
        function openFlightModal() {
            document.getElementById('e-out-date').value = flight.out.d;
            document.getElementById('e-out-time').value = flight.out.t;
            document.getElementById('e-out-code').value = flight.out.c;
            document.getElementById('e-in-date').value = flight.in.d;
            document.getElementById('e-in-time').value = flight.in.t;
            document.getElementById('e-in-code').value = flight.in.c;
            document.getElementById('flight-modal').classList.add('active');
        }
        function saveFlight() {
            flight.out.d = document.getElementById('e-out-date').value;
            flight.out.t = document.getElementById('e-out-time').value;
            flight.out.c = document.getElementById('e-out-code').value;
            flight.in.d = document.getElementById('e-in-date').value;
            flight.in.t = document.getElementById('e-in-time').value;
            flight.in.c = document.getElementById('e-in-code').value;
            localStorage.setItem('trip_flight_v4', JSON.stringify(flight));
            renderFlight();
            document.getElementById('flight-modal').classList.remove('active');
        }
        renderFlight();

        // --- 4. è¡Œææ¸…å–® ---
        let lists = JSON.parse(localStorage.getItem('trip_lists_v4')) || {
            baby: [{t:"å¥¶ç²‰/å°¿å¸ƒ", c:false}, {t:"å¯¶å¯¶ç²¥", c:false}, {t:"æ¨è»Š", c:false}],
            kids: [{t:"ç©æ²™å·¥å…·", c:false}, {t:"æ³³è¡£", c:false}]
        };
        function renderList(key) {
            const div = document.getElementById('list-'+key);
            div.innerHTML = '';
            lists[key].forEach((item, idx) => {
                div.innerHTML += `
                    <div class="checklist-item ${item.c?'checked':''}">
                        <input type="checkbox" onchange="toggleList('${key}',${idx})" ${item.c?'checked':''}>
                        <span onclick="renameList('${key}',${idx})">${item.t}</span>
                        <button class="btn-del" onclick="delList('${key}',${idx})"><i class="fa-solid fa-trash"></i></button>
                    </div>`;
            });
            localStorage.setItem('trip_lists_v4', JSON.stringify(lists));
        }
        function toggleList(k, i) { lists[k][i].c = !lists[k][i].c; renderList(k); }
        function addItem(k) {
            const val = document.getElementById('input-'+k).value;
            if(val) { lists[k].push({t:val, c:false}); document.getElementById('input-'+k).value=''; renderList(k); }
        }
        function delList(k, i) { if(confirm('åˆªé™¤?')) { lists[k].splice(i,1); renderList(k); } }
        function renameList(k, i) { const n = prompt('ä¿®æ”¹', lists[k][i].t); if(n) { lists[k][i].t = n; renderList(k); } }
        renderList('baby'); renderList('kids');

        // --- 5. è³¼ç‰©è¨˜å¸³ ---
        let shopList = JSON.parse(localStorage.getItem('trip_shop_v4')) || [];
        function renderShop() {
            const div = document.getElementById('list-shop');
            const totalEl = document.getElementById('shop-total');
            div.innerHTML = '';
            let total = 0;
            shopList.forEach((item, idx) => {
                total += parseInt(item.p || 0);
                div.innerHTML += `
                    <div class="checklist-item">
                        <span onclick="renameShop(${idx})">${item.n} <b style="color:#ff9800">$${item.p}</b></span>
                        <button class="btn-del" onclick="delShop(${idx})"><i class="fa-solid fa-trash"></i></button>
                    </div>`;
            });
            totalEl.innerText = total;
            localStorage.setItem('trip_shop_v4', JSON.stringify(shopList));
        }
        function addShopItem() {
            const name = document.getElementById('input-shop-name').value;
            const price = document.getElementById('input-shop-price').value;
            if(name) {
                shopList.push({n: name, p: price || 0});
                document.getElementById('input-shop-name').value = '';
                document.getElementById('input-shop-price').value = '';
                renderShop();
            }
        }
        function delShop(i) { if(confirm('åˆªé™¤?')) { shopList.splice(i,1); renderShop(); } }
        renderShop();
    </script>
</body>
</html>